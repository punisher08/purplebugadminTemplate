<div class="result">
<div class="cal-header">
<div class="ndl-GridItem ndl-GridItem--alignLeft plan-VisualCalendarHeader-leftActions" data-size="5">
    <div class="ndl-SearchBar-collapsed">
        <div class="ndl-FormControl ndl-FormControl--medium plan-VisualCalendarHeader-searchBar">
            <div class="ndl-FormControl-labelWrapper"></div>
            <span class="ndl-Input ndl-Input--medium ndl-Input--hasLeftIcon ndl-FormControl-field">
                <span class="ndl-Input-field-wrapper">
                    <span class="ndl-Input-field">
                        <span class="nc-icon ndl-Icon ndl-Input-icon nc-click-hover">
                            <i class="nc-icon-wrapper">
                                <svg viewBox="0 0 16 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <desc>Created with Sketch.</desc>
                                    <defs></defs>
                                    <g id="UI" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="16" transform="translate(-217.000000, -399.000000)" fill="#444444">
                                            <path
                                                d="M229.7,410.3 C230.6,409.1 231.1,407.7 231.1,406.1 C231.1,402.2 228,399 224.1,399 C220.2,399 217,402.2 217,406.1 C217,410 220.2,413.2 224.1,413.2 C225.7,413.2 227.2,412.7 228.3,411.8 L231.3,414.8 C231.5,415 231.8,415.1 232,415.1 C232.2,415.1 232.5,415 232.7,414.8 C233.1,414.4 233.1,413.8 232.7,413.4 L229.7,410.3 L229.7,410.3 Z M224.1,411.1 C221.3,411.1 219,408.9 219,406.1 C219,403.3 221.3,401 224.1,401 C226.9,401 229.2,403.3 229.2,406.1 C229.2,408.9 226.9,411.1 224.1,411.1 L224.1,411.1 Z"
                                                id="Fill-191"
                                            ></path>
                                        </g>
                                    </g>
                                </svg>
                            </i>
                        </span>
                        <input class="ndl-Input-input" type="text" placeholder="Search..." value="" />
                    </span>
                </span>
            </span>
        </div>
    </div>
    <button class="ndl-Button ndl-Button--default ndl-Button--medium plan-VisualCalendarHeader-todayButton" type="button"><span class="ndl-Button-label">Today</span></button>
    <button class="min-date ndl-Button ndl-Button--secondaryAlt ndl-Button--medium ndl-Button--iconOnly" type="button">
        <span class="nc-icon ndl-Icon ndl-Button-icon">
            <i class="nc-icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16">
                    <g transform="translate(0, 0)"><polygon fill="#444444" points="11.1,15.7 3.4,8 11.1,0.3 12.6,1.7 6.3,8 12.6,14.3 "></polygon></g>
                </svg>
            </i>
        </span>
    </button>
    <button class="add-date ndl-Button ndl-Button--secondaryAlt ndl-Button--medium ndl-Button--iconOnly" type="button">
        <span class="nc-icon ndl-Icon ndl-Button-icon">
            <i class="nc-icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16">
                    <g transform="translate(0, 0)"><polygon fill="#444444" points="4.9,15.7 3.4,14.3 9.7,8 3.4,1.7 4.9,0.3 12.6,8 "></polygon></g>
                </svg>
            </i>
        </span>
    </button>
    <input type="text" id="config-demo" class="form-control">
</div>

<!--Hello World-->
<div class="ndl-GridItem ndl-GridItem--alignRight" data-size="7">
    <div class="plan-TabActions">
        <button class="ndl-Button ndl-Button--primary ndl-Button--medium plan-ShareView" type="button">
            <span class="nc-icon ndl-Icon ndl-Button-icon">
                <i class="nc-icon-wrapper">
                    <svg viewBox="0 0 12 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M10 5.13605V8.00005H2V5.13605L0 3.80005V9.00005C0 9.26526 0.105357 9.51962 0.292893 9.70716C0.48043 9.89469 0.734784 10 1 10H11C11.2652 10 11.5196 9.89469 11.7071 9.70716C11.8946 9.51962 12 9.26526 12 9.00005V3.80005L10 5.13605Z"
                            fill="#177DD6"
                        ></path>
                        <path d="M12 2L6 6L0 2V1C0 0.734784 0.105357 0.48043 0.292893 0.292893C0.48043 0.105357 0.734784 0 1 0H11C11.2652 0 11.5196 0.105357 11.7071 0.292893C11.8946 0.48043 12 0.734784 12 1V2Z" fill="#177DD6"></path>
                    </svg>
                </i>
            </span>
            <span class="ndl-Button-label">Share</span>
        </button>
        <span class="plan-TabActions-action">
            <button class="ndl-Button ndl-Button--default ndl-Button--medium plan-PlanSavedView-saveView" type="button"><span class="ndl-Button-label">Save View</span></button>
        </span>
        <div class="ndl-Dropdown">
            <button class="ndl-Button ndl-Button--secondaryAlt ndl-Button--medium ndl-Dropdown-button ndl-Button--iconOnly" type="button">
                <span class="nc-icon ndl-Icon ndl-Button-icon">
                    <i class="nc-icon-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16">
                            <g transform="translate(0, 0)">
                                <circle data-color="color-2" fill="#444444" cx="8" cy="8" r="2"></circle>
                                <circle fill="#444444" cx="2" cy="8" r="2"></circle>
                                <circle fill="#444444" cx="14" cy="8" r="2"></circle>
                            </g>
                        </svg>
                    </i>
                </span>
            </button>
        </div>
    </div>
</div>
</div>



<div id='calendar' readonly style="opacity:0"></div>

<style>
.cal-header .ndl-GridItem--alignLeft {
    float: left;
}
.cal-header .ndl-GridItem--alignRight {
    float: right;
    margin-right:20px;
}
.cal-header .ndl-GridItem--alignRight .plan-TabActions {
    display: flex;
}
.cal-header .ndl-GridItem--alignRight .plan-TabActions button {
    background: #fff;
    border: solid 1px #c7c7c7;
    border-radius: 4px;
    cursor: pointer;
}
.cal-header .ndl-GridItem--alignRight .plan-TabActions .plan-PlanSavedView-saveView {
    height: 38px;
    color: #4655d7;
    font-weight: 600;
    width: 86px;
    margin-right: 15px;
}
.cal-header .ndl-GridItem--alignRight .plan-TabActions .ndl-Dropdown-button {
    height: 37px;
    width: 28px;
    border: none;
}
.cal-header .ndl-GridItem--alignRight .plan-TabActions .plan-ShareView {
    display: flex;
    width: 80px;
    margin-right: 15px;
    padding: 7px;
    background: #313cb1;
    color: #fff;
    text-align: center;
}
.cal-header .ndl-GridItem--alignRight .plan-TabActions .plan-ShareView svg {
    width: 15px;
    margin-top: 3px;
    margin-right: 8px;
}
.cal-header .ndl-GridItem--alignRight .plan-TabActions .plan-ShareView svg path {
    fill: white;
}
.cal-header {
    overflow: hidden;
}
.plan-VisualCalendarHeader-leftActions {
    display: flex;
    margin-left: 19px;
}
.fc-header-toolbar.fc-toolbar {
    position: absolute;
    top: -5px;
    left: 225px;
    padding: 6px;
    background: #fff;
}

.result {
    position: relative;
}

.fc .fc-toolbar.fc-header-toolbar .fc-toolbar-chunk:first-child {
    display: none;
}
.plan-VisualCalendarHeader-leftActions .ndl-SearchBar-collapsed {position:relative;padding-right: 20px;/* max-width: 60px; */}
 
.plan-VisualCalendarHeader-leftActions .ndl-SearchBar-collapsed .ndl-Input-icon.nc-click-hover svg {
    width: 15px;
    position: absolute;
    left: 10px;
    top: 10px;
}
.plan-VisualCalendarHeader-leftActions input.ndl-Input-input {
    padding-left: 30px;
    height: 35px;
    border-color: #c1c1c1;
}

.plan-VisualCalendarHeader-leftActions .ndl-Button {
    background: none;
    border: solid 1px #b9b9b9;
    border-radius: 4px;
    max-width: 60px;
    cursor: pointer;
}

.plan-VisualCalendarHeader-leftActions  .plan-VisualCalendarHeader-todayButton {
    padding: 4px 13px;
    color: #4655d7;
    font-weight: 600;
    margin-right: 15px;
}

.plan-VisualCalendarHeader-leftActions .ndl-Button--secondaryAlt {
    width: 25px;
    border: none;
}
td.fc-daygrid-day {
    max-height: 100px;
    position: relative;
}
.fc .fc-daygrid-event-harness-abs,
.fc .fc-daygrid-body-balanced .fc-daygrid-day-events {
    position: inherit !important;
    visibility:visible !important;
}
.fc-daygrid-day-events .fc-event-main img.feature-image {
    max-height: 92px;
}
#calendar {
    max-width: 1100px;
    margin: 20px auto;
    margin-top: 20px;
    margin-right: auto;
    margin-bottom: 20px;
    margin-left: auto;
}
.fc .fc-daygrid-event-harness {
    margin-bottom: 20px !important;
}
.fc-header-toolbar.fc-toolbar.fc-toolbar-ltr {
    display: none;
}
.fc-event-resizable span.title {
    clear: both;
    font-weight: bold;
    padding: 0 7px;
    margin-top: 5px;
    color: #636060;
    text-transform: capitalize;
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.fc-event-title.fc-sticky {
    color: #000;
    font-weight: bold;
    text-align: center;
    display: block;
    border: solid 1px #c1c1c1;
    border-radius: 4px;
}
.fc-daygrid-event-harness, a.fc-daygrid-event {
    padding: 0 !important;
    margin: 0 !important;
}
a.fc-daygrid-event {
    background: transparent;
    border: transparent;
    padding: 4px;
}
.medias {
    float: left;
    width: 100%;
    padding: 0 7px;
    color: #74748b;
}
button.add-new {
    width: 100%;
    height: 48px;
    background: none;
    border: 1px dashed #ccccdc !important;
    padding: 10px;
    cursor: pointer;
}
.fc .fc-daygrid-day-frame {
    min-height: auto !important;
}
.new-container{
    width: 100%;
}
.medias span.media {
    display: block;
    font-weight: bold;
}
.medias span.media .time {
    /* display: flex; */
    margin-right: 8px;
    font-style: normal;
    font-weight: 500;
}
 
.new-container ul.ndl-Dropdown-menuItems {
    margin: -13px auto;
    text-align: center;
    max-height: 250px;
    background: #fff !important;
    overflow: auto;
    width: 74px;
    border: solid 1px #c1c1c1;
    border-radius: 4px;
    position: absolute;
    right: 40px;
    z-index: 99;
}

.new-container ul.ndl-Dropdown-menuItems li {
    margin: 0;
    color: #191932;
    padding: 8px 12px;
    cursor: pointer;
}

.new-container ul.ndl-Dropdown-menuItems li:hover {
    background-color: #f5f7fa;
}
 
.form-group{
    margin-bottom:15px;
}
 .form-group textarea,
 .form-group select, .form-group .input-field {
    width: 100%;
    max-width: 100%;
    min-height: 35px !important;
    padding: 5px 10px;
}

div#create-task .create-task-button {
    text-align: center;
    margin-top: 20px;
}
.create-task-button {
    text-align: center;
}
.create-task-button .submit-task {
    background: #4655d7;
    border: none;
    color: #fff;
    display: inline-block;
    cursor: pointer;
    vertical-align: top;
    padding: 10px 0;
    border-radius: 4px;
    width: 65px;
    line-height: 1;
    font-weight: 600;
    font-size: 14px;
    margin-left: 10px;
}

.create-task-button .close {
    text-decoration: none;
    vertical-align: middle;
    line-height: 2.5;
    font-size: 14px;
    font-weight: bold;
}
.datepicker {
    position: absolute;
}
.tsk-WorkflowForm-step {
    align-items: center;
    border: 1px solid #ccccdc;
    margin: 15px 0;
    display: flex;
    padding: 0 12px;
    border-radius: 4px;
}
.tsk-WorkflowForm-container .tsk-WorkflowForm-selector {
    margin-right: 16px;
}
.ndl-AvatarPicker {
    align-items: center;
    width: 100px;
    text-align: center;
}
.assign-role {
    position: absolute;
    left: -243px;
    background: #fff;
    padding: 10px;
    width: 240px;
    border: 1px solid #ccccdc;
    border-radius: 4px;
}
.tsk-WorkflowForm-step .tsk-WorkflowForm-substep {
    align-items: center;
    display: flex;
}
.tsk-WorkflowForm-dueDate {
    width: 165px;
}

.tsk-WorkflowForm-dueDate button.ndl-Button {
    background: transparent;
    border: none;
    color: #4655d7;
    font-weight: bold;
    padding: 0;
    font-size: 12px;
}
.ndl-AvatarPicker span.nc-icon svg {
    width: 10px;
    /* fill: #4655d7 !important; */
    /* color: #4655d7; */
}
.ndl-AvatarPicker span.nc-icon {
    width: 10px;
    border: dashed 1px #4655d7;
    line-height: 0;
    padding: 9px;
    border-radius: 50%;
    height: 9px;
    display: inline-block;
}

.ndl-AvatarPicker span.nc-icon svg g path {
    fill: #4655d7 !important;
    color: #4655d7;
}

.ndl-HeaderTitle--medium {
    font-size: 16px;
    font-weight: 600;
    line-height: 20px;
    /* margin-bottom: 0; */
}

input#config-demo {
    border: none;
    background: none;
    color: #191932;
    cursor: pointer;
    display: inline-flex;
    font-size: 14px;
    font-weight: 600;
    white-space: nowrap;
    width: 215px;
    text-align:center;
}
</style>
<?php 
  $args = array(
        'numberposts'      => -1,
        'orderby'          => 'date',
        'order'            => 'DESC',
        'post_type'        => 'event-task',
        'post_status'    => 'publish'
    );

  $posts = get_posts($args); 
  if(!empty($posts)){
    $push = array();
    foreach($posts as $post){
      $post_id = $post->ID;
      $task_start_date=  get_post_meta($post_id,'task_start_date',true);
      $task_end_date = get_post_meta($post_id,'task_end_date',true);
      $attachment_id =get_post_meta($post_id,'attachment_id',true);
      //echo $attachment_id;
      //$feat_image_url = ;

      $imageids = get_post_meta($attachment_id,'upload_image',true);

      $imageurl = wp_get_attachment_url($imageids[0]);

      $push[]= array( 
          'title' => (get_the_title($attachment_id)!='')?get_the_title($attachment_id):$post->post_title,
          'start'=>$task_start_date,
          'end'=>$task_start_date,
          'imageUrl'=>$imageurl,
          'id' =>$post_id
          
          //'imageUrl'=> 

        );
      
    }

    
  }
 

   $url = get_site_url().'/wp-admin/admin.php?page=view-plan&id=';
 
?>
<script class="calendar">
var date = new Date();
var date2 = new Date();
var minus30 = date.setDate(date.getDate() +30); // add 30 days

jQuery('.plan-VisualCalendarHeader-todayButton').click(function() {
    calendar_v(date2,minus30);
});
var index = 1;
jQuery('button.add-date').click(function (){
     var add = index*30;  
     var date = new Date();
     var date23 = new Date();
     var minus301 = date.setDate(date.getDate() +add); // add 30 days
         console.log(minus301);
         calendar_v(date23,new Date(minus301));
    index++;

}); 

calendar_v(date2,minus30);
jQuery('#config-demo').daterangepicker({
    "timePicker": true,
    locale: {
            format: 'MMM D, Y'
        },
    ranges: {
        'Today': [moment(), moment()],
        'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
        'Last 7 Days': [moment().subtract(6, 'days'), moment()],
        'Last 30 Days': [moment().subtract(29, 'days'), moment()],
        'This Month': [moment().startOf('month'), moment().endOf('month')],
        'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
    },
    "alwaysShowCalendars": true,
    "startDate": minus30,
    "endDate": date,
    "drops": "auto"
}, function(start, end, label) {
    
    calendar_v(start.format('YYYY-MM-DD'),end.format('YYYY-MM-DD'));
});

function calendar_v(start,end){
     var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
 
              initialView: 'resourceTimelineWeek',
              //defaultView: 'basicWeek',
               // defaultView: 'dayGridMonth',
                 validRange: {
                  start: start,
                  end: end
                },
              selectable: true,
              selectHelper: false,
              editable: true,
             }); 
     calendar.render();              
}   

  jQuery(document).ready(function () {
     jQuery('.fc-dayGridWeek-button').trigger('click');
     jQuery('#calendar').css('opacity','1');

  });

</script>

<div id="create-task" class="modal">
    <form id="creat-task-form" method="POST">
        <header class="ndl-Header ndl-Header--section ndl-Modal-header">
            <h1 class="ndl-HeaderTitle ndl-HeaderTitle--section ndl-HeaderTitle--medium undefined"><div class="plan-CreateModal-title">Create New Task</div></h1>
        </header>
        <div class="form-group">
            <input name="task-title" required id="task-title" class="input-field" maxlength="80" type="text" placeholder="Enter task title here" value="" />
            <p class="ndl-Text ndl-Text--secondary ndl-Input-charCount ndl-CharacterCount">0/80</p>
        </div>
        <div class="form-group">
            <label>
                Campaign *
                <select name="Campaign" class="form-field" id="campaign">
                    <?php 
            $terms = get_terms( 'campaign', array(
             'hide_empty' =>
                    false, ) ); if(!empty($terms)){ foreach($terms as $term){ echo '
                    <option value="'.$term->term_id.'">'.$term->name.'</option>
                    '; } }else{ echo '
                    <option val="">Create your campaign</option>
                    '; } ?>
                </select>
            </label>
        </div>
        <div class="form-group">
            <label>
                Workflow
                <input class="input-field" name="Workflow" placeholder="Select a workflow" id="Workflow" id="Workflow" />
            </label>

            <div class="workflow_roles"></div>
        </div>
        <div class="form-group">
            <label>
                Task Due Date *
                <input required id="task-due-date" name="task_end_date" type="text" placeholder="" class="input-field ndl-DatePicker-input" value="" />
                <input id="task_start_date" name="task_start_date" type="hidden" placeholder="" class="input-field ndl-DatePicker-input" value="" />
            </label>
        </div>

        <div class="create-task-button">
            <div class="inner-buttons">
                <input type="hidden" name="type" value="TASK" />
                <a class="close ndl-Button ndl-Button--primary ndl-Button--medium" href="#" rel="modal:close">Close</a>
                <button class="ndl-Button ndl-Button--primary ndl-Button--medium submit-task">Create</button>
            </div>
        </div>
    </form>
</div>

<div id="create-event" class="modal">
    <form id="create-event-form" method="POST">
        <header class="ndl-Header ndl-Header--section ndl-Modal-header">
            <h1 class="ndl-HeaderTitle ndl-HeaderTitle--section ndl-HeaderTitle--medium undefined"><div class="plan-CreateModal-title">Create New Event</div></h1>
        </header>
        <div class="form-group">
            <input name="task-title" required id="task-title" class="input-field" maxlength="80" type="text" placeholder="Add Event Name" value="" />
            <p class="ndl-Text ndl-Text--secondary ndl-Input-charCount ndl-CharacterCount">0/80</p>
        </div>
        <div class="form-group">
            <label>
                Event Description *
                <div name="event-secription" required class="ndl-TextArea ndl-TextArea--isResizeable ndl-FormControl-field">
                    <textarea class="ndl-TextArea-field" maxlength="250" placeholder="Add details about your event..."></textarea>
                    <p class="ndl-Text ndl-Text--secondary ndl-TextArea-charCount ndl-CharacterCount">0/250</p>
                </div>
            </label>
        </div>
        <div class="form-group">
            <label>
                Campaign *
                <select name="Campaign" class="form-field" id="campaign">
                    <?php 
            $terms = get_terms( 'campaign', array(
             'hide_empty' =>
                    false, ) ); if(!empty($terms)){ foreach($terms as $term){ echo '
                    <option value="'.$term->term_id.'">'.$term->name.'</option>
                    '; } }else{ echo '
                    <option val="">Create your campaign</option>
                    '; } ?>
                </select>
            </label>
        </div>
        <div class="form-group date-picker">
            <div class="form-field right">
                <label>
                    End Date *
                    <input id="event-due-date" required name="task_end_date" type="text" placeholder="" class="input-field ndl-DatePicker-input" value="" />
                    <input id="task_start_date-event" name="task_start_date" type="hidden" placeholder="" class="date input-field ndl-DatePicker-input" value="" />
                </label>
            </div>
        </div>

        <div class="create-task-button">
            <div class="inner-buttons">
                <input type="hidden" name="type" value="EVENT" />
                <a class="close ndl-Button ndl-Button--primary ndl-Button--medium" href="#" rel="modal:close">Close</a>
                <button class="ndl-Button ndl-Button--primary ndl-Button--medium submit-task">Create</button>
            </div>
        </div>
    </form>
</div>
</div>

